import Link from "next/link";
import SiteImage from "@/components/SiteImage";

export default function DatasetPage() {
  return (
    <main className="max-w-6xl mx-auto px-6 py-16 space-y-16">

      <h1 className="text-4xl font-bold">Dataset</h1>

      <p className="text-gray-300 max-w-3xl leading-relaxed">
        The Electrum Observatory dataset contains raw and processed information
        collected from all reachable Electrum servers. Each dataset below includes:
        <strong> methodology used, preprocessing steps, and a link to the analysis notebook.</strong>
      </p>

      {/* ------------------------------------------------------------- */}
      {/* 1. Raw Server Metadata */}
      {/* ------------------------------------------------------------- */}
      <section>
        <h2 className="text-3xl font-semibold mb-4">1. Raw Server Metadata</h2>

        <p className="text-gray-400 max-w-3xl mb-4">
          Raw JSON output collected during active network scanning.
          This includes IP reachability, banner strings, protocol negotiation,
          TLS fingerprints, and basic latency measurements.
        </p>

        <h3 className="text-xl font-semibold mb-3">Technique Used</h3>
        <ul className="list-disc ml-6 text-gray-300 space-y-1">
          <li>Asynchronous Electrum protocol handshake</li>
          <li>Direct TCP and SSL probing</li>
          <li>TLS certificate extraction (OpenSSL API)</li>
          <li>Response parsing for metadata fields</li>
        </ul>

        <Link
          href="#"
          target="_blank"
          className="inline-block mt-4 px-5 py-2 rounded-lg bg-white/10 border border-white/20 text-gray-200 hover:bg-white/20 transition"
        >
          Open Notebook (Raw Metadata)
        </Link>

        <div className="mt-6 p-5 mx-auto md:mx-0 bg-white/5 border w-fit border-white/10 rounded-xl text-gray-400 italic">
          <SiteImage
            src="/results/raw-sample.png"
            alt="Placeholder: preview of raw metadata JSON"
            width={300}
            height={300}
          />
        </div>
      </section>

      {/* ------------------------------------------------------------- */}
      {/* 2. Processed Metadata (servers.csv) */}
      {/* ------------------------------------------------------------- */}
      <section>
        <h2 className="text-3xl font-semibold mb-4">2. Processed Metadata (servers.csv)</h2>

        <p className="text-gray-400 max-w-3xl mb-4">
          Canonicalized metadata generated by normalizing raw JSON files into a
          structured CSV. Includes GeoIP lookup, behavioral hashes, and certificate
          classification.
        </p>

        <h3 className="text-xl font-semibold mb-3">Technique Used</h3>
        <ul className="list-disc ml-6 text-gray-300 space-y-1">
          <li>Deduplication across multiple scanning passes</li>
          <li>GeoIP (MaxMind) resolution</li>
          <li>Certificate reuse grouping</li>
          <li>Computation of behavioral fingerprint hashes</li>
        </ul>

        {/* Notebook link */}
        <Link
          href="#"
          target="_blank"
          className="inline-block mt-4 px-5 py-2 rounded-lg bg-white/10 border border-white/20 text-gray-200 hover:bg-white/20 transition"
        >
          Open Notebook (Processed CSV)
        </Link>

        {/* Placeholder */}
        <div className="mt-6 p-5 bg-white/5 border border-white/10 rounded-xl text-gray-400 italic">
          {/* <Image src="/results/processed-preview.png" ... /> */}
          (Placeholder: preview of servers.csv)
        </div>
      </section>

      {/* ------------------------------------------------------------- */}
      {/* 3. Behavioral Fingerprints */}
      {/* ------------------------------------------------------------- */}
      <section>
        <h2 className="text-3xl font-semibold mb-4">3. Behavioral Fingerprints</h2>

        <p className="text-gray-400 max-w-3xl mb-4">
          Response profiles collected from structured queries, malformed requests,
          and timing measurements. Used to detect modified Electrum implementations
          and potential surveillance patterns.
        </p>

        <h3 className="text-xl font-semibold mb-3">Technique Used</h3>
        <ul className="list-disc ml-6 text-gray-300 space-y-1">
          <li>Controlled RPC probes (address history, xpub tests)</li>
          <li>Timing variance analysis for 30â€“60 repeated calls</li>
          <li>Malformed query injection</li>
          <li>Error pattern comparison</li>
        </ul>

        {/* Notebook link */}
        <Link
          href="#"
          target="_blank"
          className="inline-block mt-4 px-5 py-2 rounded-lg bg-white/10 border border-white/20 text-gray-200 hover:bg-white/20 transition"
        >
          Open Notebook (Fingerprinting)
        </Link>

        <div className="mt-6 p-5 bg-white/5 border border-white/10 rounded-xl text-gray-400 italic">
          {/* <Image src="/results/fingerprint-clusters.png" ... /> */}
          (Placeholder: fingerprint cluster visualization)
        </div>
      </section>

      {/* ------------------------------------------------------------- */}
      {/* 4. TLS Analysis */}
      {/* ------------------------------------------------------------- */}
      <section>
        <h2 className="text-3xl font-semibold mb-4">4. TLS Analysis</h2>

        <p className="text-gray-400 max-w-3xl mb-4">
          Certificate fingerprints, issuers, SAN fields, and validity ranges used
          for honeypot detection and operator attribution.
        </p>

        <h3 className="text-xl font-semibold mb-3">Technique Used</h3>
        <ul className="list-disc ml-6 text-gray-300 space-y-1">
          <li>OpenSSL certificate parsing</li>
          <li>Detection of certificate reuse clusters</li>
          <li>Issuer anomaly detection</li>
          <li>Validity-period risk scoring</li>
        </ul>

        {/* Notebook link */}
        <Link
          href="#"
          target="_blank"
          className="inline-block mt-4 px-5 py-2 rounded-lg bg-white/10 border border-white/20 text-gray-200 hover:bg-white/20 transition"
        >
          Open Notebook (TLS Analysis)
        </Link>

        <div className="mt-6 p-5 bg-white/5 border w-fit border-white/10 rounded-xl text-gray-400 italic">
          <SiteImage
            src="/results/certificate_clusters.png"
            alt="TLS certificate reuse graph"
            width={900}
            height={500}
            className="rounded-lg border border-white/10"
          />
        </div>
      </section>
    </main>
  );
}